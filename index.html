<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏ä‡∏ä‡∏¥‡πà‡∏á</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #007AFF;
            --primary-dark: #0056CC;
            --secondary-color: #5856D6;
            --success-color: #34C759;
            --warning-color: #FF9500;
            --error-color: #FF3B30;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --text-white: #FFFFFF;
            --border-radius: 12px;
            --border-radius-lg: 20px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .glass-container {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .app {
            min-height: 100vh;
        }

        .loading-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: var(--spacing-lg);
        }

        .dashboard {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .main-nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .nav-menu {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }

        .menu-card {
            background: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 600;
            text-decoration: none;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .menu-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.15);
        }

        .menu-card.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-actions {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-white);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .form-section {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: var(--spacing-xs);
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-label.required::after {
            content: " *";
            color: var(--error-color);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #E5E5EA;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .input-with-button {
            display: flex;
            gap: var(--spacing-sm);
        }

        .input-with-button .form-input {
            flex: 1;
        }

        .dashboard-content {
            padding: var(--spacing-lg);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .stat-card {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--spacing-xs);
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .team-overview {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: var(--spacing-lg);
        }

        .team-scroll {
            display: flex;
            gap: var(--spacing-md);
            overflow-x: auto;
            padding: var(--spacing-md) 0;
        }

        .trainer-card {
            flex: 0 0 auto;
            text-align: center;
            padding: var(--spacing-md);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 120px;
        }

        .trainer-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .trainer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto var(--spacing-xs);
            color: white;
        }

        .trainer-stats {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-xs);
        }

        .stat-badge {
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .customer-id-display {
            background: var(--glass-card);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-lg);
            text-align: center;
            border-left: 4px solid var(--primary-color);
        }

        .unsaved-badge {
            background: var(--warning-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: var(--spacing-sm);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .form-subsection {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #007AFF;
        }
        
        .subsection-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .financial-products {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .product-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .product-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 150px;
        }
        
        .product-inputs {
            display: flex;
            gap: 1rem;
            flex: 1;
        }
        
        .product-inputs input {
            flex: 1;
        }
        
        .children-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .child-item {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .add-button {
            background: #34C759;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .remove-button {
            background: #FF3B30;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .unknown-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: #666;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: var(--spacing-lg);
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid #E5E5EA;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--error-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .last-update {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .comment-section {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .comment {
            padding: 0.75rem;
            background: white;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border-left: 3px solid var(--primary-color);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .main-nav {
                flex-direction: column;
                gap: var(--spacing-md);
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .glass-container {
                margin: var(--spacing-sm);
                padding: var(--spacing-md);
            }
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .chart-container {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .simple-chart {
            height: 200px;
            display: flex;
            align-items: end;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem;
        }

        .chart-bar {
            background: var(--primary-color);
            border-radius: 4px 4px 0 0;
            min-width: 40px;
            position: relative;
            transition: all 0.3s ease;
        }

        .chart-bar:hover {
            background: var(--primary-dark);
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .filter-section {
            background: white;
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: var(--spacing-lg);
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // Constants
        const POSITIONS = ['BM', 'WCRM', 'CISA', 'CFSA', 'IA', 'IS', '‡∏≠‡∏∑‡πà‡∏ô ‡πÜ'];
        const COURSES = ['Account Plan', 'Calling Skill', 'Sales Technique', 'Sales Idea', 'Sales Progress', '‡∏≠‡∏∑‡πà‡∏ô ‡πÜ'];
        const REGIONS = ['RH1', 'RH2', 'RH3', 'RH4', 'RH5'];
        const GENDER_OPTIONS = ['‡∏ä‡∏≤‡∏¢', '‡∏´‡∏ç‡∏¥‡∏á', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];
        const STATUS_OPTIONS = ['‡πÇ‡∏™‡∏î', '‡πÅ‡∏ï‡πà‡∏á‡∏á‡∏≤‡∏ô', '‡∏´‡∏¢‡πà‡∏≤', '‡∏´‡∏°‡πâ‡∏≤‡∏¢'];
        const OCCUPATIONS = ['‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß', '‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£', '‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó', 'freelance', '‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏≥', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];
        const BUSINESS_TYPES = ['‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', '‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤', '‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°', '‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏£‡∏°', '‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];
        
        const TRAINER_PASSWORDS = {
            '0001': 'RH1',
            '0002': 'RH2', 
            '0003': 'RH3',
            '0004': 'RH4',
            '0005': 'RH5',
            '0009': 'all'
        };

        // Mock Data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Region/Zone/Branch
        const BRANCH_DATA = {
            '001': { name: '‡∏™‡∏≤‡∏Ç‡∏≤‡∏™‡∏¢‡∏≤‡∏°‡∏™‡πÅ‡∏Ñ‡∏ß‡∏£‡πå', region: 'RH1', zone: 'Zone A' },
            '002': { name: '‡∏™‡∏≤‡∏Ç‡∏≤‡∏™‡∏µ‡∏•‡∏°', region: 'RH1', zone: 'Zone A' },
            '003': { name: '‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏•', region: 'RH2', zone: 'Zone B' },
            '004': { name: '‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏î‡∏≠‡∏∞‡∏°‡∏≠‡∏•‡∏•‡πå', region: 'RH2', zone: 'Zone B' },
            '005': { name: '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ñ‡∏ô‡∏ô‡∏£‡∏±‡∏ä‡∏î‡∏≤', region: 'RH3', zone: 'Zone C' }
        };

        const ZONE_DATA = {
            'RH1': ['Zone A', 'Zone B'],
            'RH2': ['Zone C', 'Zone D'],
            'RH3': ['Zone E', 'Zone F'],
            'RH4': ['Zone G', 'Zone H'],
            'RH5': ['Zone I', 'Zone J']
        };

        const BRANCHES_BY_ZONE = {
            'Zone A': ['‡∏™‡∏≤‡∏Ç‡∏≤‡∏™‡∏¢‡∏≤‡∏°‡∏™‡πÅ‡∏Ñ‡∏ß‡∏£‡πå', '‡∏™‡∏≤‡∏Ç‡∏≤‡∏™‡∏µ‡∏•‡∏°'],
            'Zone B': ['‡∏™‡∏≤‡∏Ç‡∏≤‡∏ö‡∏≤‡∏á‡∏ô‡∏≤', '‡∏™‡∏≤‡∏Ç‡∏≤‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏∏‡∏Ç'],
            'Zone C': ['‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏•', '‡∏™‡∏≤‡∏Ç‡∏≤‡πÇ‡∏£‡∏ö‡∏¥‡∏ô‡∏™‡∏±‡∏ô'],
            'Zone D': ['‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏°‡∏Å‡∏≤‡∏ö‡∏≤‡∏á‡∏ô‡∏≤', '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ã‡∏µ‡∏Ñ‡∏≠‡∏ô'],
            'Zone E': ['‡∏™‡∏≤‡∏Ç‡∏≤‡∏ñ‡∏ô‡∏ô‡∏£‡∏±‡∏ä‡∏î‡∏≤', '‡∏™‡∏≤‡∏Ç‡∏≤‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß']
        };

        // Utility Functions
        const generateCustomerId = () => {
            const now = new Date();
            const year = (now.getFullYear() + 543).toString().slice(-2);
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `C-${year}${month}${day}${hours}${minutes}`;
        };

        const formatThaiDateTime = (date = new Date()) => {
            return date.toLocaleString('th-TH', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
        };

        // Enhanced Data Service
        const DataService = {
            getRegistrations: () => {
                return JSON.parse(localStorage.getItem('registrations') || '[]');
            },
            
            saveRegistration: (data) => {
                const registrations = DataService.getRegistrations();
                const newData = { 
                    ...data, 
                    id: Date.now().toString(),
                    timestamp: formatThaiDateTime(),
                    lastUpdate: formatThaiDateTime(),
                    updatedBy: 'General User'
                };
                registrations.push(newData);
                localStorage.setItem('registrations', JSON.stringify(registrations));
                
                // ‡∏™‡πà‡∏á notification ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Trainer
                DataService.addNotification(data.region || 'all', 'new_registration');
                return true;
            },
            
            getCoachings: () => {
                return JSON.parse(localStorage.getItem('coachings') || '[]');
            },
            
            saveCoaching: (data) => {
                const coachings = DataService.getCoachings();
                const newData = { 
                    ...data, 
                    id: Date.now().toString(),
                    timestamp: formatThaiDateTime(),
                    lastUpdate: formatThaiDateTime(),
                    updatedBy: 'General User',
                    comments: [],
                    status: 'new'
                };
                coachings.push(newData);
                localStorage.setItem('coachings', JSON.stringify(coachings));
                
                // ‡∏™‡πà‡∏á notification ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Trainer
                DataService.addNotification(data.region || 'all', 'new_coaching');
                return true;
            },

            updateCoaching: (customerId, updates) => {
                const coachings = DataService.getCoachings();
                const index = coachings.findIndex(c => c.customerId === customerId);
                if (index !== -1) {
                    coachings[index] = {
                        ...coachings[index],
                        ...updates,
                        lastUpdate: formatThaiDateTime(),
                        updatedBy: updates.updatedBy || 'General User'
                    };
                    localStorage.setItem('coachings', JSON.stringify(coachings));
                    return true;
                }
                return false;
            },

            addComment: (customerId, comment, user) => {
                const coachings = DataService.getCoachings();
                const index = coachings.findIndex(c => c.customerId === customerId);
                if (index !== -1) {
                    if (!coachings[index].comments) {
                        coachings[index].comments = [];
                    }
                    coachings[index].comments.push({
                        id: Date.now().toString(),
                        text: comment,
                        user: user,
                        timestamp: formatThaiDateTime()
                    });
                    coachings[index].lastUpdate = formatThaiDateTime();
                    coachings[index].updatedBy = user;
                    coachings[index].status = 'replied';
                    localStorage.setItem('coachings', JSON.stringify(coachings));
                    return true;
                }
                return false;
            },

            findCoachingByCustomerId: (customerId) => {
                const coachings = DataService.getCoachings();
                return coachings.find(c => c.customerId === customerId) || null;
            },

            getDashboardData: (region, filters = {}) => {
                let registrations = DataService.getRegistrations();
                let coachings = DataService.getCoachings();
                
                // Filter by region
                if (region && region !== 'all') {
                    registrations = registrations.filter(reg => reg.region === region);
                    coachings = coachings.filter(coach => coach.region === region);
                }

                // Filter by date range
                if (filters.startDate && filters.endDate) {
                    // Simplified date filtering
                    registrations = registrations.filter(reg => {
                        const regDate = new Date(reg.timestamp);
                        return regDate >= new Date(filters.startDate) && regDate <= new Date(filters.endDate);
                    });
                    coachings = coachings.filter(coach => {
                        const coachDate = new Date(coach.timestamp);
                        return coachDate >= new Date(filters.startDate) && coachDate <= new Date(filters.endDate);
                    });
                }

                // Filter by position
                if (filters.position) {
                    registrations = registrations.filter(reg => reg.position === filters.position);
                }

                // Filter by coaching type
                if (filters.coachingType) {
                    coachings = coachings.filter(coach => coach.coachingType === filters.coachingType);
                }
                
                return {
                    totalRegistrations: registrations.length,
                    totalCoachings: coachings.length,
                    registrationsByRegion: DataService.groupBy(registrations, 'region'),
                    coachingsByRegion: DataService.groupBy(coachings, 'region'),
                    registrationsByPosition: DataService.groupBy(registrations, 'position'),
                    coachingTypes: DataService.groupBy(coachings, 'coachingType'),
                    monthlyData: DataService.getMonthlyData(registrations, coachings)
                };
            },

            getMonthlyData: (registrations, coachings) => {
                const months = ['‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.', '‡∏Å.‡∏Ñ.', '‡∏™.‡∏Ñ.', '‡∏Å.‡∏¢.', '‡∏ï.‡∏Ñ.', '‡∏û.‡∏¢.', '‡∏ò.‡∏Ñ.'];
                const currentMonth = new Date().getMonth();
                
                return months.map((month, index) => ({
                    month,
                    registrations: Math.floor(Math.random() * 20) + 5,
                    coachings: Math.floor(Math.random() * 15) + 3
                }));
            },
            
            groupBy: (array, key) => {
                return array.reduce((acc, item) => {
                    const group = item[key] || 'Unknown';
                    acc[group] = (acc[group] || 0) + 1;
                    return acc;
                }, {});
            },

            getNotifications: (region) => {
                const notifications = JSON.parse(localStorage.getItem('notifications') || '{}');
                return notifications[region] || { newRegistrations: 0, newCoachings: 0 };
            },

            addNotification: (region, type) => {
                const notifications = JSON.parse(localStorage.getItem('notifications') || '{}');
                if (!notifications[region]) {
                    notifications[region] = { newRegistrations: 0, newCoachings: 0 };
                }
                if (type === 'new_registration') {
                    notifications[region].newRegistrations++;
                } else if (type === 'new_coaching') {
                    notifications[region].newCoachings++;
                }
                localStorage.setItem('notifications', JSON.stringify(notifications));
            },

            clearNotifications: (region, type) => {
                const notifications = JSON.parse(localStorage.getItem('notifications') || '{}');
                if (notifications[region]) {
                    if (type === 'registrations') {
                        notifications[region].newRegistrations = 0;
                    } else if (type === 'coachings') {
                        notifications[region].newCoachings = 0;
                    }
                    localStorage.setItem('notifications', JSON.stringify(notifications));
                }
            },

            // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            getPasswordChangeRequests: () => {
                return JSON.parse(localStorage.getItem('passwordChangeRequests') || '[]');
            },

            requestPasswordChange: (trainerId, newPassword) => {
                const requests = DataService.getPasswordChangeRequests();
                const request = {
                    id: Date.now().toString(),
                    trainerId,
                    newPassword,
                    timestamp: formatThaiDateTime(),
                    status: 'pending',
                    autoApproveTime: Date.now() + 5 * 60 * 1000 // 5 minutes
                };
                requests.push(request);
                localStorage.setItem('passwordChangeRequests', JSON.stringify(requests));
                return true;
            },

            approvePasswordChange: (requestId) => {
                const requests = DataService.getPasswordChangeRequests();
                const request = requests.find(r => r.id === requestId);
                if (request) {
                    request.status = 'approved';
                    localStorage.setItem('passwordChangeRequests', JSON.stringify(requests));
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡πÉ‡∏ô production ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™)
                    const trainers = JSON.parse(localStorage.getItem('trainers') || '{}');
                    trainers[request.trainerId] = request.newPassword;
                    localStorage.setItem('trainers', JSON.stringify(trainers));
                    return true;
                }
                return false;
            },

            checkAutoApprove: () => {
                const requests = DataService.getPasswordChangeRequests();
                const now = Date.now();
                let changed = false;

                requests.forEach(request => {
                    if (request.status === 'pending' && now >= request.autoApproveTime) {
                        request.status = 'auto_approved';
                        changed = true;
                    }
                });

                if (changed) {
                    localStorage.setItem('passwordChangeRequests', JSON.stringify(requests));
                }
            }
        };

        // Components
        const LoadingSpinner = () => (
            <div className="loading-spinner"></div>
        );

        const Navigation = ({ userType, activeMenu, onMenuSelect, onLogout, notifications = {} }) => (
            <nav className="main-nav">
                <div className="nav-brand">
                    {userType === 'trainer' ? 'Trainer Dashboard' : 
                     userType === 'admin' ? 'Admin Dashboard' : '‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°'}
                </div>
                <div className="nav-menu">
                    <button 
                        className={`menu-card ${activeMenu === 'register' ? 'active' : ''}`}
                        onClick={() => onMenuSelect('register')}
                    >
                        üìù Register
                        {notifications.registrations > 0 && (
                            <span className="notification-badge">{notifications.registrations}</span>
                        )}
                    </button>
                    <button 
                        className={`menu-card ${activeMenu === 'coach' ? 'active' : ''}`}
                        onClick={() => onMenuSelect('coach')}
                    >
                        üíº Coach
                        {notifications.coachings > 0 && (
                            <span className="notification-badge">{notifications.coachings}</span>
                        )}
                    </button>
                    <button 
                        className={`menu-card ${activeMenu === 'library' ? 'active' : ''}`}
                        onClick={() => onMenuSelect('library')}
                    >
                        üìö Idea Library
                    </button>
                    {userType === 'admin' && (
                        <button 
                            className={`menu-card ${activeMenu === 'management' ? 'active' : ''}`}
                            onClick={() => onMenuSelect('management')}
                        >
                            ‚öôÔ∏è Management
                        </button>
                    )}
                </div>
                <div className="nav-actions">
                    <button className="btn btn-sm btn-secondary" onClick={() => onMenuSelect('home')}>
                        üè† Home
                    </button>
                    <button className="btn btn-sm btn-secondary" onClick={onLogout}>
                        üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
            </nav>
        );

        // Customer Search Component
        const CustomerSearch = ({ onCustomerFound, onClose }) => {
            const [customerId, setCustomerId] = useState('');
            const [employeeId, setEmployeeId] = useState('');
            const [showAuth, setShowAuth] = useState(false);
            const [searchResult, setSearchResult] = useState(null);

            const handleSearch = () => {
                const coaching = DataService.findCoachingByCustomerId(customerId);
                if (coaching) {
                    setSearchResult(coaching);
                    setShowAuth(true);
                } else {
                    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Customer ID ‡∏ô‡∏µ‡πâ');
                }
            };

            const handleAuth = () => {
                if (searchResult && searchResult.employeeId === employeeId) {
                    onCustomerFound(searchResult);
                    onClose();
                } else {
                    alert('‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                }
            };

            return (
                <div className="modal-overlay">
                    <div className="modal-content">
                        <div className="modal-header">
                            <h3 className="modal-title">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                            <button className="modal-close" onClick={onClose}>√ó</button>
                        </div>
                        
                        {!showAuth ? (
                            <>
                                <div className="form-group">
                                    <label className="form-label">Customer ID</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={customerId}
                                        onChange={(e) => setCustomerId(e.target.value)}
                                        placeholder="‡∏Å‡∏£‡∏≠‡∏Å Customer ID"
                                    />
                                </div>
                                <button className="btn btn-primary" onClick={handleSearch}>
                                    ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                                </button>
                            </>
                        ) : (
                            <>
                                <div className="form-group">
                                    <label className="form-label">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</label>
                                    <input
                                        type="password"
                                        className="form-input"
                                        value={employeeId}
                                        onChange={(e) => setEmployeeId(e.target.value)}
                                        placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô"
                                    />
                                </div>
                                <div style={{display: 'flex', gap: '1rem'}}>
                                    <button className="btn btn-primary" onClick={handleAuth}>
                                        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                                    </button>
                                    <button className="btn btn-secondary" onClick={() => setShowAuth(false)}>
                                        ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                                    </button>
                                </div>
                            </>
                        )}
                    </div>
                </div>
            );
        };

        // Comment System Component
        const CommentSection = ({ customerId, comments = [], onAddComment, currentUser }) => {
            const [newComment, setNewComment] = useState('');

            const handleSubmit = () => {
                if (newComment.trim()) {
                    onAddComment(newComment);
                    setNewComment('');
                }
            };

            return (
                <div className="comment-section">
                    <h4>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</h4>
                    {comments.map(comment => (
                        <div key={comment.id} className="comment">
                            <div className="comment-header">
                                <span>{comment.user}</span>
                                <span>{comment.timestamp}</span>
                            </div>
                            <div>{comment.text}</div>
                        </div>
                    ))}
                    <div style={{marginTop: '1rem'}}>
                        <textarea
                            className="form-textarea"
                            value={newComment}
                            onChange={(e) => setNewComment(e.target.value)}
                            placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô..."
                            rows="3"
                        />
                        <button 
                            className="btn btn-primary btn-sm"
                            onClick={handleSubmit}
                            style={{marginTop: '0.5rem'}}
                        >
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô
                        </button>
                    </div>
                </div>
            );
        };

        // Team Overview Component
        const TeamOverview = ({ onTrainerSelect, region }) => {
            const [trainers] = useState([
                { id: '1', name: 'Trainer RH1', region: 'RH1', avatar: 'üë®‚Äçüíº', totalMTD: 45, newCases: 3 },
                { id: '2', name: 'Trainer RH2', region: 'RH2', avatar: 'üë©‚Äçüíº', totalMTD: 38, newCases: 5 },
                { id: '3', name: 'Trainer RH3', region: 'RH3', avatar: 'üë®‚Äçüíº', totalMTD: 52, newCases: 2 },
                { id: '4', name: 'Trainer RH4', region: 'RH4', avatar: 'üë©‚Äçüíº', totalMTD: 29, newCases: 4 },
                { id: '5', name: 'Trainer RH5', region: 'RH5', avatar: 'üë®‚Äçüíº', totalMTD: 41, newCases: 1 },
            ]);

            const filteredTrainers = region === 'all' 
                ? trainers 
                : trainers.filter(t => t.region === region);

            return (
                <div className="team-overview">
                    <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem'}}>
                        <h3>Team Overview</h3>
                        <button className="btn btn-sm btn-secondary">View All</button>
                    </div>
                    <div className="team-scroll">
                        {filteredTrainers.map(trainer => (
                            <div key={trainer.id} className="trainer-card" onClick={() => onTrainerSelect(trainer)}>
                                <div className="trainer-avatar">{trainer.avatar}</div>
                                <div style={{ fontWeight: '600', fontSize: '0.875rem' }}>{trainer.region}</div>
                                <div className="trainer-stats">
                                    <span className="stat-badge">{trainer.totalMTD}</span>
                                    <span className="stat-badge" style={{ background: '#FF9500' }}>
                                        {trainer.newCases}
                                    </span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Chart Components
        const PieChart = ({ data, title }) => {
            const total = Object.values(data).reduce((sum, value) => sum + value, 0);
            
            return (
                <div className="chart-container">
                    <div className="chart-title">{title}</div>
                    <div className="simple-chart">
                        {Object.entries(data).map(([label, value], index) => {
                            const percentage = total > 0 ? (value / total) * 100 : 0;
                            const colors = ['#007AFF', '#34C759', '#FF9500', '#FF3B30', '#5856D6'];
                            
                            return (
                                <div key={label} style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>
                                    <div 
                                        className="chart-bar"
                                        style={{
                                            height: `${percentage}%`,
                                            backgroundColor: colors[index % colors.length],
                                            width: '40px'
                                        }}
                                    >
                                        <div className="chart-value">{value}</div>
                                    </div>
                                    <div className="chart-label">{label}</div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        const BarChart = ({ data, title }) => {
            const maxValue = Math.max(...Object.values(data), 1);
            
            return (
                <div className="chart-container">
                    <div className="chart-title">{title}</div>
                    <div className="simple-chart">
                        {Object.entries(data).map(([label, value]) => {
                            const percentage = (value / maxValue) * 100;
                            
                            return (
                                <div key={label} style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>
                                    <div 
                                        className="chart-bar"
                                        style={{
                                            height: `${percentage}%`,
                                            backgroundColor: '#007AFF',
                                            width: '30px'
                                        }}
                                    >
                                        <div className="chart-value">{value}</div>
                                    </div>
                                    <div className="chart-label">{label}</div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        // Filter Component
        const DashboardFilter = ({ onFilterChange, currentFilters }) => {
            const [filters, setFilters] = useState(currentFilters);

            const handleFilterChange = (key, value) => {
                const newFilters = { ...filters, [key]: value };
                setFilters(newFilters);
                onFilterChange(newFilters);
            };

            return (
                <div className="filter-section">
                    <div className="filter-group">
                        <div className="filter-label">Region</div>
                        <select 
                            className="form-select"
                            value={filters.region || ''}
                            onChange={(e) => handleFilterChange('region', e.target.value)}
                        >
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            {REGIONS.map(region => (
                                <option key={region} value={region}>{region}</option>
                            ))}
                        </select>
                    </div>
                    
                    <div className="filter-group">
                        <div className="filter-label">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
                        <select 
                            className="form-select"
                            value={filters.position || ''}
                            onChange={(e) => handleFilterChange('position', e.target.value)}
                        >
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            {POSITIONS.map(position => (
                                <option key={position} value={position}>{position}</option>
                            ))}
                        </select>
                    </div>
                    
                    <div className="filter-group">
                        <div className="filter-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Coaching</div>
                        <select 
                            className="form-select"
                            value={filters.coachingType || ''}
                            onChange={(e) => handleFilterChange('coachingType', e.target.value)}
                        >
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            {COURSES.map(course => (
                                <option key={course} value={course}>{course}</option>
                            ))}
                        </select>
                    </div>
                    
                    <div className="filter-group">
                        <div className="filter-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
                        <input
                            type="date"
                            className="form-input"
                            value={filters.startDate || ''}
                            onChange={(e) => handleFilterChange('startDate', e.target.value)}
                        />
                    </div>
                    
                    <div className="filter-group">
                        <div className="filter-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</div>
                        <input
                            type="date"
                            className="form-input"
                            value={filters.endDate || ''}
                            onChange={(e) => handleFilterChange('endDate', e.target.value)}
                        />
                    </div>
                    
                    <button 
                        className="btn btn-secondary"
                        onClick={() => {
                            const resetFilters = {};
                            setFilters(resetFilters);
                            onFilterChange(resetFilters);
                        }}
                    >
                        ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå
                    </button>
                </div>
            );
        };

<!-- ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô -->

<script type="text/babel">
    // ... (‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô) ...
// ‡πÄ‡∏û‡∏¥‡πà‡∏° LoadingPage component
const LoadingPage = ({ onNavigate }) => {
    useEffect(() => {
        // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î
        setTimeout(() => {
            onNavigate('general-user');
        }, 2000);
    }, [onNavigate]);

    return (
        <div className="loading-page">
            <div className="glass-container" style={{padding: '2rem', textAlign: 'center'}}>
                <div className="loading-spinner" style={{width: '40px', height: '40px', margin: '0 auto 1rem'}}></div>
                <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏ä‡∏ä‡∏¥‡πà‡∏á</h2>
                <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
            </div>
        </div>
    );
};

// ‡πÄ‡∏û‡∏¥‡πà‡∏° GeneralUserDashboard component
const GeneralUserDashboard = ({ onLogout }) => {
    const [activeMenu, setActiveMenu] = useState('register');

    return (
        <div className="dashboard">
            <Navigation 
                userType="general"
                activeMenu={activeMenu}
                onMenuSelect={setActiveMenu}
                onLogout={onLogout}
            />
            
            {activeMenu === 'register' && <RegisterForm />}
            {activeMenu === 'coach' && <CoachForm />}
            {activeMenu === 'library' && <div>Idea Library - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤</div>}
        </div>
    );
};

// ‡πÄ‡∏û‡∏¥‡πà‡∏° IdeaLibrary component ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
const IdeaLibrary = () => {
    return (
        <div className="form-container">
            <h2 className="form-title">Idea Library</h2>
            <div className="form-section">
                <p>‡∏£‡∏∞‡∏ö‡∏ö Idea Library ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤</p>
            </div>
        </div>
    );
};
    // Password Change Component
    const PasswordChangeModal = ({ trainerId, onClose }) => {
        const [currentPassword, setCurrentPassword] = useState('');
        const [newPassword, setNewPassword] = useState('');
        const [confirmPassword, setConfirmPassword] = useState('');

        const handleSubmit = () => {
            if (newPassword !== confirmPassword) {
                alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô');
                return;
            }
            
            DataService.requestPasswordChange(trainerId, newPassword);
            alert('‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å Admin');
            onClose();
        };

        return (
            <div className="modal-overlay">
                <div className="modal-content">
                    <div className="modal-header">
                        <h3 className="modal-title">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
                        <button className="modal-close" onClick={onClose}>√ó</button>
                    </div>
                    
                    <div className="form-group">
                        <label className="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                        <input
                            type="password"
                            className="form-input"
                            value={currentPassword}
                            onChange={(e) => setCurrentPassword(e.target.value)}
                        />
                    </div>
                    
                    <div className="form-group">
                        <label className="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                        <input
                            type="password"
                            className="form-input"
                            value={newPassword}
                            onChange={(e) => setNewPassword(e.target.value)}
                        />
                    </div>
                    
                    <div className="form-group">
                        <label className="form-label">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                        <input
                            type="password"
                            className="form-input"
                            value={confirmPassword}
                            onChange={(e) => setConfirmPassword(e.target.value)}
                        />
                    </div>
                    
                    <div style={{display: 'flex', gap: '1rem'}}>
                        <button className="btn btn-primary" onClick={handleSubmit}>
                            ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
                        </button>
                        <button className="btn btn-secondary" onClick={onClose}>
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                    </div>
                    
                    <div style={{marginTop: '1rem', fontSize: '0.875rem', color: '#666'}}>
                        ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Admin ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 
                        ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                    </div>
                </div>
            </div>
        );
    };

    // Enhanced RegisterForm with Branch/Zone System
    const RegisterForm = () => {
        const [formData, setFormData] = useState({
            name: '',
            employeeId: '',
            position: '',
            branchCode: '',
            branchName: '',
            region: '',
            zone: '',
            branch: '',
            course: '',
            otherCourse: ''
        });
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [zones, setZones] = useState([]);
        const [branches, setBranches] = useState([]);

        const handleBranchCodeSearch = () => {
            if (formData.branchCode && BRANCH_DATA[formData.branchCode]) {
                const branchInfo = BRANCH_DATA[formData.branchCode];
                setFormData({
                    ...formData,
                    branchName: branchInfo.name,
                    region: branchInfo.region,
                    zone: branchInfo.zone
                });
            } else {
                alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ');
            }
        };

        const handleRegionChange = (region) => {
            setFormData({
                ...formData,
                region,
                zone: '',
                branch: ''
            });
            setZones(ZONE_DATA[region] || []);
            setBranches([]);
        };

        const handleZoneChange = (zone) => {
            setFormData({
                ...formData,
                zone,
                branch: ''
            });
            setBranches(BRANCHES_BY_ZONE[zone] || []);
        };

        const handleSubmit = async (e) => {
            e.preventDefault();
            setIsSubmitting(true);
            
            try {
                const success = DataService.saveRegistration(formData);
                if (success) {
                    alert('‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    setFormData({
                        name: '', employeeId: '', position: '', branchCode: '',
                        branchName: '', region: '', zone: '', branch: '',
                        course: '', otherCourse: ''
                    });
                }
            } catch (error) {
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
            } finally {
                setIsSubmitting(false);
            }
        };

        return (
            <div className="form-container">
                <h2 className="form-title">‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏≠‡∏ö‡∏£‡∏°</h2>
                <form onSubmit={handleSubmit}>
                    <div className="form-section">
                        <div className="form-group">
                            <label className="form-label required">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                            <input
                                type="text"
                                className="form-input"
                                value={formData.name}
                                onChange={(e) => setFormData({...formData, name: e.target.value})}
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label className="form-label required">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</label>
                            <input
                                type="text"
                                className="form-input"
                                value={formData.employeeId}
                                onChange={(e) => setFormData({...formData, employeeId: e.target.value})}
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label className="form-label required">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</label>
                            <select
                                className="form-select"
                                value={formData.position}
                                onChange={(e) => setFormData({...formData, position: e.target.value})}
                                required
                            >
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</option>
                                {POSITIONS.map(pos => (
                                    <option key={pos} value={pos}>{pos}</option>
                                ))}
                            </select>
                        </div>

                        <div className="form-group">
                            <label className="form-label">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤</label>
                            <div className="input-with-button">
                                <input
                                    type="text"
                                    className="form-input"
                                    value={formData.branchCode}
                                    onChange={(e) => setFormData({...formData, branchCode: e.target.value})}
                                    placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤"
                                />
                                <button type="button" className="btn btn-sm btn-secondary" onClick={handleBranchCodeSearch}>
                                    ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                                </button>
                            </div>
                        </div>

                        {formData.branchCode && formData.branchName && (
                            <div className="form-group">
                                <label className="form-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤</label>
                                <div style={{padding: '1rem', background: '#f8f9fa', borderRadius: '8px'}}>
                                    <div>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤: {formData.branchName}</div>
                                    <div>Region: {formData.region}</div>
                                    <div>Zone: {formData.zone}</div>
                                </div>
                            </div>
                        )}

                        {!formData.branchCode && (
                            <>
                                <div className="form-group">
                                    <label className="form-label required">Region</label>
                                    <select
                                        className="form-select"
                                        value={formData.region}
                                        onChange={(e) => handleRegionChange(e.target.value)}
                                        required
                                    >
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Region</option>
                                        {REGIONS.map(region => (
                                            <option key={region} value={region}>{region}</option>
                                        ))}
                                    </select>
                                </div>

                                {formData.region && (
                                    <div className="form-group">
                                        <label className="form-label">Zone</label>
                                        <select
                                            className="form-select"
                                            value={formData.zone}
                                            onChange={(e) => handleZoneChange(e.target.value)}
                                        >
                                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Zone</option>
                                            {zones.map(zone => (
                                                <option key={zone} value={zone}>{zone}</option>
                                            ))}
                                        </select>
                                    </div>
                                )}

                                {formData.zone && (
                                    <div className="form-group">
                                        <label className="form-label">‡∏™‡∏≤‡∏Ç‡∏≤</label>
                                        <select
                                            className="form-select"
                                            value={formData.branch}
                                            onChange={(e) => setFormData({...formData, branch: e.target.value})}
                                        >
                                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤</option>
                                            {branches.map(branch => (
                                                <option key={branch} value={branch}>{branch}</option>
                                            ))}
                                        </select>
                                    </div>
                                )}
                            </>
                        )}

                        <div className="form-group">
                            <label className="form-label required">‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</label>
                            <select
                                className="form-select"
                                value={formData.course}
                                onChange={(e) => setFormData({...formData, course: e.target.value})}
                                required
                            >
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£</option>
                                {COURSES.map(course => (
                                    <option key={course} value={course}>{course}</option>
                                ))}
                            </select>
                        </div>

                        {formData.course === '‡∏≠‡∏∑‡πà‡∏ô ‡πÜ' && (
                            <div className="form-group">
                                <label className="form-label">‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    value={formData.otherCourse}
                                    onChange={(e) => setFormData({...formData, otherCourse: e.target.value})}
                                />
                            </div>
                        )}

                        <button type="submit" className="btn btn-primary" disabled={isSubmitting}>
                            {isSubmitting ? <LoadingSpinner /> : 'Submit'}
                        </button>
                    </div>
                </form>
            </div>
        );
    };

    // Enhanced CoachForm with Complete Features
    const CoachForm = ({ editingData = null, onUpdate = null }) => {
        const [customerId, setCustomerId] = useState(editingData?.customerId || '');
        const [isSaved, setIsSaved] = useState(!!editingData);
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [activeSection, setActiveSection] = useState('personal');
        
        const [formData, setFormData] = useState(editingData || {
            employeeName: '', employeeId: '', position: '', branchCode: '', region: '', zone: '',
            customerName: '', gender: '', age: '', status: '', occupation: '', income: '',
            financialProducts: [
                { type: '‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å', key: 'deposit', checked: false, value: '', debt: '' },
                { type: '‡∏´‡∏∏‡πâ‡∏ô‡∏Å‡∏π‡πâ', key: 'bonds', checked: false, value: '', debt: '' },
                { type: '‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°', key: 'mutualFunds', checked: false, value: '', debt: '' },
                { type: '‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï', key: 'creditCard', checked: false, value: '', debt: '' },
                { type: '‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠', key: 'loan', checked: false, value: '', debt: '' }
            ],
            insurance: { has: false, policyCount: '', coverage: '' },
            otherProducts: [],
            spouseAge: '', spouseOccupation: '', children: [],
            hasDependents: false, dependentsCount: '', dependentRelationship: '',
            businessName: '', businessType: '', registeredCapital: '', annualIncome: '',
            netProfit: '', tax: '', sharePercentage: '', shareholderEquity: '', additionalInfo: '',
            coachingType: '', additionalDetails: '',
            unknownFlags: { income: false, financial: false, family: false, business: false }
        });

        useEffect(() => {
            if (!editingData) {
                setCustomerId(generateCustomerId());
            }
        }, [editingData]);

        // ... (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ...

const handleSave = async () => {
            setIsSubmitting(true);
            
            // Validate required fields
            if (!formData.employeeName || !formData.employeeId || !formData.customerName) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                setIsSubmitting(false);
                return;
            }

            try {
                let success;
                if (editingData && onUpdate) {
                    success = DataService.updateCoaching(customerId, {
                        ...formData,
                        updatedBy: 'General User'
                    });
                    if (success) {
                        onUpdate(formData);
                        setIsSaved(true);
                        alert('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    }
                } else {
                    const completeData = {
                        customerId,
                        ...formData,
                        timestamp: formatThaiDateTime(),
                        lastUpdate: formatThaiDateTime(),
                        updatedBy: 'General User'
                    };

                    success = DataService.saveCoaching(completeData);
                    if (success) {
                        setIsSaved(true);
                        alert(`‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô\nCustomer ID ‡∏Ñ‡∏∑‡∏≠ : ${customerId}`);
                    }
                }
            } catch (error) {
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
            } finally {
                setIsSubmitting(false);
            }
        };

        const renderLastUpdate = () => (
            <div className="last-update">
                Last update: {formData.lastUpdate || formatThaiDateTime()} | {formData.updatedBy || 'General User'}
            </div>
        );

        return (
            <div className="form-container">
                <h2 className="form-title">
                    {editingData ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡πâ‡∏ä' : '‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ / Coaching'}
                </h2>
                
                <div className="customer-id-display">
                    <strong>Customer ID: {customerId}</strong>
                    {!isSaved && <span className="unsaved-badge">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>}
                </div>

                {/* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô */}
                <div className="form-section">
                    <h3>üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h3>
                    {/* ... (‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... */}
                </div>

                {/* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ */}
                <div className="form-section">
                    <h3>üë• ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    
                    <div style={{display: 'flex', gap: '1rem', marginBottom: '2rem', flexWrap: 'wrap'}}>
                        <button className={`btn btn-sm ${activeSection === 'personal' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setActiveSection('personal')}>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</button>
                        <button className={`btn btn-sm ${activeSection === 'financial' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setActiveSection('financial')}>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</button>
                        <button className={`btn btn-sm ${activeSection === 'family' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setActiveSection('family')}>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</button>
                        <button className={`btn btn-sm ${activeSection === 'business' ? 'btn-primary' : 'btn-secondary'}`}
                            onClick={() => setActiveSection('business')}>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</button>
                    </div>

                    {/* ... (‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... */}
                </div>

                {/* ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Coaching */}
                <div className="form-section">
                    <h3>üéØ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Coaching ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</h3>
                    {/* ... (‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Coaching) ... */}
                </div>

                {editingData && (
                    <CommentSection
                        customerId={customerId}
                        comments={formData.comments || []}
                        onAddComment={(comment) => {
                            DataService.addComment(customerId, comment, 'Trainer');
                        }}
                        currentUser="Trainer"
                    />
                )}

                {renderLastUpdate()}

                <div className="form-actions" style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>
                    <button onClick={handleSave} className="btn btn-primary" disabled={isSubmitting}>
                        {isSubmitting ? <LoadingSpinner /> : (editingData ? '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï' : '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å')}
                    </button>
                    <button className="btn btn-secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </div>
        );
    };

    // Enhanced Trainer Dashboard
    const TrainerDashboard = ({ region, onLogout }) => {
        const [activeMenu, setActiveMenu] = useState('dashboard');
        const [stats, setStats] = useState(null);
        const [selectedRegion, setSelectedRegion] = useState(region);
        const [filters, setFilters] = useState({});
        const [showCustomerSearch, setShowCustomerSearch] = useState(false);
        const [editingCoaching, setEditingCoaching] = useState(null);
        const [showPasswordChange, setShowPasswordChange] = useState(false);

        useEffect(() => {
            const dashboardData = DataService.getDashboardData(selectedRegion, filters);
            setStats(dashboardData);
        }, [selectedRegion, filters]);

        const notifications = DataService.getNotifications(selectedRegion);

        const handleCustomerFound = (coachingData) => {
            setEditingCoaching(coachingData);
            setActiveMenu('coach');
        };

        const handleUpdateCoaching = (updatedData) => {
            setEditingCoaching(null);
            DataService.clearNotifications(selectedRegion, 'coachings');
        };

        const renderDashboard = () => (
            <div className="dashboard-content">
                <TeamOverview 
                    onTrainerSelect={(trainer) => {
                        // ‡πÄ‡∏õ‡∏¥‡∏î side panel ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î trainer
                        alert(`‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á ${trainer.name}`);
                    }}
                    region={selectedRegion}
                />
                
                <DashboardFilter onFilterChange={setFilters} currentFilters={filters} />
                
                {stats && (
                    <>
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-number">{stats.totalRegistrations}</div>
                                <div className="stat-label">Total Registrations</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-number">{stats.totalCoachings}</div>
                                <div className="stat-label">Total Coachings</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-number">
                                    {Object.keys(stats.registrationsByRegion).length}
                                </div>
                                <div className="stat-label">Regions Active</div>
                            </div>
                        </div>

                        <div className="charts-grid">
                            <PieChart 
                                data={stats.registrationsByRegion} 
                                title="‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏° Region"
                            />
                            <PieChart 
                                data={stats.coachingsByRegion} 
                                title="‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏•‡∏≤‡∏™‡∏ï‡∏≤‡∏° Region"
                            />
                            <BarChart 
                                data={stats.registrationsByPosition} 
                                title="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"
                            />
                            <BarChart 
                                data={stats.coachingTypes} 
                                title="‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£"
                            />
                        </div>
                    </>
                )}

                <div className="form-section">
                    <h3>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <div className="form-group">
                        <input
                            type="text"
                            className="form-input"
                            placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Customer ID"
                            onFocus={() => setShowCustomerSearch(true)}
                        />
                    </div>
                    <button 
                        className="btn btn-primary"
                        onClick={() => setShowCustomerSearch(true)}
                    >
                        ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                    </button>
                </div>
            </div>
        );

        return (
            <div className="dashboard">
                <Navigation 
                    userType="trainer"
                    activeMenu={activeMenu}
                    onMenuSelect={setActiveMenu}
                    onLogout={onLogout}
                    notifications={notifications}
                />
                
                <div className="main-nav" style={{background: '#f8f9fa'}}>
                    <div style={{display: 'flex', gap: '1rem', alignItems: 'center'}}>
                        <strong>Region: {selectedRegion}</strong>
                        {region === 'all' && (
                            <select 
                                value={selectedRegion}
                                onChange={(e) => setSelectedRegion(e.target.value)}
                                className="form-select"
                                style={{width: 'auto'}}
                            >
                                <option value="all">All Regions</option>
                                {REGIONS.map(r => (
                                    <option key={r} value={r}>{r}</option>
                                ))}
                            </select>
                        )}
                    </div>
                    <div className="nav-actions">
                        <button 
                            className="btn btn-sm btn-secondary"
                            onClick={() => setShowPasswordChange(true)}
                        >
                            ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                        </button>
                    </div>
                </div>

                {activeMenu === 'dashboard' && renderDashboard()}
                {activeMenu === 'register' && <RegisterForm />}
                {activeMenu === 'coach' && (
                    editingCoaching ? 
                    <CoachForm editingData={editingCoaching} onUpdate={handleUpdateCoaching} /> :
                    <CoachForm />
                )}
                {activeMenu === 'library' && <IdeaLibrary />}

                {showCustomerSearch && (
                    <CustomerSearch
                        onCustomerFound={handleCustomerFound}
                        onClose={() => setShowCustomerSearch(false)}
                    />
                )}

                {showPasswordChange && (
                    <PasswordChangeModal
                        trainerId={region}
                        onClose={() => setShowPasswordChange(false)}
                    />
                )}
            </div>
        );
    };

    // Admin Dashboard with Complete Management
    const AdminDashboard = ({ onLogout }) => {
        const [activeMenu, setActiveMenu] = useState('management');
        const [passwordRequests, setPasswordRequests] = useState([]);

        useEffect(() => {
            DataService.checkAutoApprove();
            setPasswordRequests(DataService.getPasswordChangeRequests());
        }, []);

        const handleApproveRequest = (requestId) => {
            if (DataService.approvePasswordChange(requestId)) {
                setPasswordRequests(DataService.getPasswordChangeRequests());
                alert('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
            }
        };

        const renderManagement = () => (
            <div className="dashboard-content">
                <div className="form-section">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Trainer</h3>
                    <div className="form-group">
                        <h4>‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h4>
                        {passwordRequests.filter(req => req.status === 'pending').map(request => (
                            <div key={request.id} style={{
                                padding: '1rem',
                                border: '1px solid #e0e0e0',
                                borderRadius: '8px',
                                marginBottom: '0.5rem',
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center'
                            }}>
                                <div>
                                    <div>Trainer: {request.trainerId}</div>
                                    <div>‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠: {request.timestamp}</div>
                                    <div style={{fontSize: '0.875rem', color: '#666'}}>
                                        ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô: {Math.ceil((request.autoApproveTime - Date.now()) / 60000)} ‡∏ô‡∏≤‡∏ó‡∏µ
                                    </div>
                                </div>
                                <button 
                                    className="btn btn-primary btn-sm"
                                    onClick={() => handleApproveRequest(request.id)}
                                >
                                    ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                                </button>
                            </div>
                        ))}
                    </div>
                </div>

                <div className="form-section">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Idea Library</h3>
                    <div style={{display: 'flex', gap: '1rem', flexWrap: 'wrap'}}>
                        <button className="btn btn-primary">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå</button>
                        <button className="btn btn-primary">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå PDF</button>
                        <button className="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏´‡∏±‡∏™ Trainer</button>
                        <button className="btn btn-primary">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏´‡∏±‡∏™</button>
                    </div>
                </div>

                <div className="form-section">
                    <h3>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h3>
                    <button className="btn btn-secondary">Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </div>
        );

        return (
            <div className="dashboard">
                <Navigation 
                    userType="admin"
                    activeMenu={activeMenu}
                    onMenuSelect={setActiveMenu}
                    onLogout={onLogout}
                />
                
                {activeMenu === 'management' && renderManagement()}
                {activeMenu === 'dashboard' && <TrainerDashboard region="all" onLogout={
                {activeMenu === 'library' && <div>Idea Library - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤</div>}
            </div>
        );
    };

    // Main App Component
    const App = () => {
        const [currentPage, setCurrentPage] = useState('loading');
        const [pageProps, setPageProps] = useState({});

        const handleNavigate = (page, props = {}) => {
            setCurrentPage(page);
            setPageProps(props);
        };

        const handleLogout = () => {
            setCurrentPage('loading');
            setPageProps({});
        };

        const renderPage = () => {
            switch (currentPage) {
                case 'loading':
                    return <LoadingPage onNavigate={handleNavigate} />;
                case 'general-user':
                    return <GeneralUserDashboard onLogout={handleLogout} />;
                case 'trainer':
                    return <TrainerDashboard {...pageProps} onLogout={handleLogout} />;
                case 'admin':
                    return <AdminDashboard onLogout={handleLogout} />;
                default:
                    return <LoadingPage onNavigate={handleNavigate} />;
            }
        };

        return <div className="app">{renderPage()}</div>;
    };

    // Render the App
    ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
```
